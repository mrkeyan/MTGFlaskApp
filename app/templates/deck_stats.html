{% extends 'index.html'%}
{% block content%}
<div class="container col-md-10 col-lg-8">
<h1>All Deck Stats</h1>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Deck Name</th>
                <th>Color Identity</th>
                <th>Deck Owner</th>
                <th>Win Rate (%)</th>
                {% if not current_user.is_anonymous %}
                <th></th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
        {% for deck in decks %}
            <tr>
                <td>{{ deck.deck_name }}</td>
                <td>{{ deck.color_identity_rel.identity_name }}</td>
                <td>{{ deck.deck_owner.player_name if deck.deck_owner else 'N/A'}}</td>
                <td>{{ (deck.win_rate * 100) | round (2) }}%</td>
                {% if not current_user.is_anonymous %}
                <td><a href="{{ url_for('main.edit_deck', deck_id=deck.id) }}">Edit</a></td>
                {% endif %}
            </tr>
        {% else %}
            <tr>
                <td {% if not current_user.is_anonymous %} colspan="3" {% else %} colspan="4" {% endif %}>No decks found.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}