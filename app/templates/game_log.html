{% extends 'index.html' %}
{% block head %}
<style>

</style>
{% endblock %}
{% block content %}
<div class="container col-md-10 col-lg-8">
  <h1 class="mb-4">Game Logs</h1>

  <table class="table table-bordered table-hover table-striped">
    <thead class="table-light">
      <tr>
        <th scope="col">Session ID</th>
        <th scope="col">Game Results</th>
        {% if not current_user.is_anonymous %}
        <th scope="col"></th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
      <!-- Top header row with empty 1st and 3rd columns -->
      <tr>
        <td></td>
        <td style="padding:0;">
          <table class="gl_inner-table table table-bordered mb-0">
            <thead class="table-secondary">
              <tr>
                <th scope="col" class="col-2">Player</th>
                <th scope="col" class="col-4">Deck</th>
                <th scope="col" class="col-1">Finish</th>
                <th scope="col" class="col-2">Eliminated By</th>
              </tr>
            </thead>
          </table>
        </td>
        {% if not current_user.is_anonymous %}
        <td></td>
        {% endif %}
      </tr>

      {% for session_id, results in sessions.items() %}
  {% set session_idx = loop.index0 %}
  {% set stripe_class = 'table-active' if session_idx is odd else '' %}
  <tr class="{{ stripe_class }}">
    <td class="align-middle">{{ session_id }}</td>
    <td style="padding:0;">
      <table class="gl_inner-table table table-bordered mb-0">
        <tbody>
          {% for result in results %}
            <tr class="{{ stripe_class }}">
              <td class="col-2">{{ result.player.player_name }}</td>
              <td class="col-4">{{ result.deck.deck_name }}</td>
              <td class="col-1">{{ result.finish }}</td>
              <td class="col-2">{% if result.eliminated_by %}{{ result.eliminated_by.player_name }}{% else %}â€”{% endif %}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </td>
    {% if not current_user.is_anonymous %}
    <td class="align-middle">
      <a href="{{ url_for('main.edit_game_session', session_id=session_id) }}" class="btn btn-primary btn-sm">Edit</a>
    </td>
    {% endif %}
  </tr>
{% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
